<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MBSStools - an R toolkit for the MBSS program's data needs • MBSStools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="MBSStools - an R toolkit for the MBSS program's data needs">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MBSStools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/MBSStools_vignette.html">MBSStools - an R toolkit for the MBSS program's data needs</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/leppott/MBSStools">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>MBSStools - an R toolkit for the MBSS program’s data needs</h1>
                        <h4 class="author"><a href="mailto:Erik.Leppo@tetratech.com" class="email">Erik.Leppo@tetratech.com</a></h4>
            
            <h4 class="date">2019-11-07</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/leppott/MBSStools/blob/master/vignettes/MBSStools_vignette.Rmd"><code>vignettes/MBSStools_vignette.Rmd</code></a></small>
      <div class="hidden name"><code>MBSStools_vignette.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p><code>MBSStools</code> was created by Tetra Tech, Inc. in 2017 to meet the needs of Maryland Department of Natural Resources (DNR), Maryland Biological Stream Survey (MBSS) staff to complete data manipulations in an efficient and reproducible manner.</p>
<p>It is envisioned that this library will be a living program and will add additional functions and routines in the future.</p>
<p>Many of the examples in this vignette are included in the example sections in the corresponding functions. Each function in the <code>MBSStools</code> library includes example data from MBSS.</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>The R library is saved on GitHub (<a href="https://github.com/leppott/MBSStools" class="uri">https://github.com/leppott/MBSStools</a>) for ease of updating and distribution. Issues can be tracked, fixed, and code is available for download. Current users of <code>MBSStools</code> can update the library using the same code used to install the library (see below). Devtools is required to download from GitHub. At this time, there are no plans to submit <code>MBSStools</code> to CRAN (R’s library repository).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"devtools"</span>)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(devtools)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">install_github</span>(<span class="st">"leppott/MBSStools"</span>)</span></code></pre></div>
<p>To contact the author directly email <a href="mailto:Erik.Leppo@tetratech.com" class="email">Erik.Leppo@tetratech.com</a>.</p>
</div>
<div id="packages" class="section level1">
<h1 class="hasAnchor">
<a href="#packages" class="anchor"></a>Packages</h1>
<p>Serveral packages were used to build the functionality in <code>MBSStools</code>.</p>
<ol style="list-style-type: decimal">
<li><p>FlowSum; no extra packages</p></li>
<li><p>IonContrib; no extra packages</p></li>
<li><p>MapTaxaObs; <code>readxl</code> and <code>rgdal</code></p></li>
<li><p>metric.scores; <code>dplyr</code></p></li>
<li><p>metric.values; <code>dplyr</code></p></li>
<li><p>PHIcalc; no extra packages</p></li>
</ol>
<p>These packages should install automatically when <code>MBSStools</code> installs. But if you encounter issues with a function not working ensure that the necessary package dependencies are installed.</p>
<p>To install packages follow the example of the code below for installing <code>dplyr</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">install.package</span>(<span class="st">"dplyr"</span>)</span></code></pre></div>
</div>
<div id="contents" class="section level1">
<h1 class="hasAnchor">
<a href="#contents" class="anchor"></a>Contents</h1>
<p>There are several functions included in the library each with a particular focus on a dataset and the necessary calculations for data analysis.</p>
<ol style="list-style-type: decimal">
<li><p>Index of Biological Integrity (IBI) calculations for fish and benthic macroinvertebrates.</p></li>
<li><p>Taxonomic distribution maps for fish.</p></li>
<li><p>Stream discharge calculation.</p></li>
<li><p>Ion contribution to conductivity.</p></li>
<li><p>Physical Habitat Index (PHI) calculation.</p></li>
</ol>
<p>Example data included with each function.</p>
<div id="ibi" class="section level2">
<h2 class="hasAnchor">
<a href="#ibi" class="anchor"></a>IBI</h2>
<p><code>MBSStools</code> calculates both the benthic macroinvertebrate IBI (BIBI) and fish IBI (FIBI). THe IBIs are described in the document Southerland et al. 2005 that is included in the /extdata folder of the library.</p>
<p>There are two functions; metric.values() to calculate the metrics (e.g., total individuals or total taxa) and metric.scores() that converts the metric values to the appropriate score (e.g., 1, 3, or 5). The functions are the save for fish and benthic macroinvertebrates. Only the argument fun.Community needs to be changed to “bugs” or “fish”.</p>
<p><code>MBSStools</code> does <strong>not</strong> aggregate or compile taxa lists. Taxa data with site/sample information, counts, phylogenetic (phylum, class, order, etc), and autecological (habit, tolerance value, and function feeding group) information is required as an input to the functions. Fish data needs the additional values of watershed (catchment) area (in acres), average stream width, and reach length.</p>
<p>In background is a file (/data-raw/metrics.scoring.tab) wiht a table of metric names, scoring thresholds, index name, and index regions. These can be changed to modify the index names, bioregions, metric names, and scoring thresholds. This table can be modified and used as input into the function. For simplicity this table is included by default.</p>
<p>The functions metric.values() and metric.scores() require the <code>dplyr</code> function.</p>
<div id="ibi-fish" class="section level3">
<h3 class="hasAnchor">
<a href="#ibi-fish" class="anchor"></a>IBI, Fish</h3>
<p>Calculates the fish IBI.</p>
<p>The adjustment of metrics based on watershed area is automatic for fish metrics.</p>
<p>Fish metric values assumes the following fields (all upper case)</p>
<ul>
<li><p>SITE = MBSS sample identifier.</p></li>
<li><p>FIBISTRATA = Fish region (COASTAL, EPIEDMONT, WARM, COLD).</p></li>
<li><p>ACREAGE = Catchment area in acres.</p></li>
<li><p>LEN_SAMP = Length of stream sampled; typically 75-meters.</p></li>
<li><p>AVWID = Average stream width (meters) for sampled site.</p></li>
<li><p>SPECIES = MBSS fish taxa name.</p></li>
<li><p>TOTAL = Number of fish collected in sample.</p></li>
<li><p>TYPE = Fish group identifier (ALL CAPS); SCULPIN, DARTER, MADTOM, etc.</p></li>
<li><p>TROPHIC_MBSS = MBSS tropic status designations (ALL CAPS); OM, GE, IS, IV, etc.</p></li>
<li><p>PTOLR = Pollution tolerance level (ALL CAPS); T, I, NO TYPE.</p></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># Metrics, Fish</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(MBSStools)</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#(generate values then score)s</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>myIndex &lt;-<span class="st"> "MBSS.2005.Fish"</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co"># Thresholds</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>thresh &lt;-<span class="st"> </span>metrics_scoring</span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co"># get metric names for myIndex</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>(myMetrics.Fish &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/droplevels.html">droplevels</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(thresh[thresh[,<span class="st">"Index.Name"</span>]<span class="op">==</span>myIndex,<span class="st">"MetricName.Other"</span>]))))</span></code></pre></div>
<pre><code>##  [1] "ABUNSQM"   "NUMBENTSP" "PTOL"      "PGEOMIV"   "PROUND"   
##  [6] "PABDOM"    "BIOM_MSQ"  "P_LITH"    "P_IS"      "PBROOK"   
## [11] "PSCULP"</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># Taxa Data</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>myDF.Fish &lt;-<span class="st"> </span>taxa_fish</span>
<span id="cb5-3"><a href="#cb5-3"></a>myMetric.Values.Fish &lt;-<span class="st"> </span><span class="kw"><a href="../reference/metric.values.html">metric.values</a></span>(myDF.Fish, <span class="st">"fish"</span>, myMetrics.Fish, <span class="ot">TRUE</span>)</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#View(myMetric.Values.Fish)</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co"># SCORE</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>Metrics.Fish.Scores &lt;-<span class="st"> </span><span class="kw"><a href="../reference/metric.scores.html">metric.scores</a></span>(myMetric.Values.Fish, myMetrics.Fish, <span class="st">"Index.Name"</span>, <span class="st">"FIBISTRATA"</span>, thresh)</span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co"># View Results</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(Metrics.Fish.Scores))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Index.Name</th>
<th align="left">SITE</th>
<th align="left">FIBISTRATA</th>
<th align="right">ACREAGE</th>
<th align="right">LEN_SAMP</th>
<th align="right">AVWID</th>
<th align="right">STRMAREA</th>
<th align="right">TOTCNT</th>
<th align="right">ABUNSQM</th>
<th align="right">PABDOM</th>
<th align="right">TOTBIOM</th>
<th align="right">BIOM_MSQ</th>
<th align="right">NUMBENTSP</th>
<th align="right">NUMBROOK</th>
<th align="right">PBROOK</th>
<th align="right">NUMGEOMIV</th>
<th align="right">PGEOMIV</th>
<th align="right">NUMIS</th>
<th align="right">P_IS</th>
<th align="right">NUMLITH</th>
<th align="right">P_LITH</th>
<th align="right">NUMROUND</th>
<th align="right">PROUND</th>
<th align="right">NUMSCULP</th>
<th align="right">PSCULP</th>
<th align="right">NUMTOL</th>
<th align="right">PTOL</th>
<th align="right">NUMBENTSP_Obs</th>
<th align="right">NUMBENTSP_m</th>
<th align="right">NUMBENTSP_b</th>
<th align="right">NUMBENTSP_Exp</th>
<th align="right">NUMBENTSP_Adj</th>
<th align="left">Index.Region</th>
<th align="right">SC_ABUNSQM</th>
<th align="right">SC_NUMBENTSP</th>
<th align="right">SC_PTOL</th>
<th align="right">SC_PGEOMIV</th>
<th align="right">SC_PROUND</th>
<th align="right">SC_PABDOM</th>
<th align="right">SC_BIOM_MSQ</th>
<th align="right">SC_P_LITH</th>
<th align="right">SC_P_IS</th>
<th align="right">SC_PBROOK</th>
<th align="right">SC_PSCULP</th>
<th align="right">sum_IBI</th>
<th align="right">IBI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">MBSS.2005.Fish</td>
<td align="left">ABPG-204-R-2016</td>
<td align="left">COASTAL</td>
<td align="right">2481.9226</td>
<td align="right">75</td>
<td align="right">8.375</td>
<td align="right">628.125</td>
<td align="right">220</td>
<td align="right">0.3502488</td>
<td align="right">23.18182</td>
<td align="right">2591</td>
<td align="right">4.124975</td>
<td align="right">0.4154218</td>
<td align="right">0</td>
<td align="right">0.00000</td>
<td align="right">210</td>
<td align="right">95.45455</td>
<td align="right">0</td>
<td align="right">0.000000</td>
<td align="right">0</td>
<td align="right">0.00000</td>
<td align="right">9</td>
<td align="right">4.090909</td>
<td align="right">0</td>
<td align="right">0.000000</td>
<td align="right">149</td>
<td align="right">67.72727</td>
<td align="right">1</td>
<td align="right">1.69</td>
<td align="right">-3.33</td>
<td align="right">2.4071921</td>
<td align="right">0.4154218</td>
<td align="left">COASTAL</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">24</td>
<td align="right">4.000000</td>
</tr>
<tr class="even">
<td align="left">MBSS.2005.Fish</td>
<td align="left">ANTI-101-S-2016</td>
<td align="left">COLD</td>
<td align="right">1413.9500</td>
<td align="right">75</td>
<td align="right">4.050</td>
<td align="right">303.750</td>
<td align="right">176</td>
<td align="right">0.5794239</td>
<td align="right">73.86364</td>
<td align="right">1505</td>
<td align="right">4.954733</td>
<td align="right">0.0000000</td>
<td align="right">37</td>
<td align="right">21.02273</td>
<td align="right">176</td>
<td align="right">100.00000</td>
<td align="right">0</td>
<td align="right">0.000000</td>
<td align="right">46</td>
<td align="right">26.13636</td>
<td align="right">0</td>
<td align="right">0.000000</td>
<td align="right">0</td>
<td align="right">0.000000</td>
<td align="right">139</td>
<td align="right">78.97727</td>
<td align="right">0</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">COLD</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">14</td>
<td align="right">3.500000</td>
</tr>
<tr class="odd">
<td align="left">MBSS.2005.Fish</td>
<td align="left">ATKI-003-X-2016</td>
<td align="left">EPIEDMONT</td>
<td align="right">105.0300</td>
<td align="right">75</td>
<td align="right">1.700</td>
<td align="right">127.500</td>
<td align="right">611</td>
<td align="right">4.7921569</td>
<td align="right">53.51882</td>
<td align="right">1638</td>
<td align="right">12.847059</td>
<td align="right">6.0008987</td>
<td align="right">0</td>
<td align="right">0.00000</td>
<td align="right">566</td>
<td align="right">92.63502</td>
<td align="right">45</td>
<td align="right">7.364975</td>
<td align="right">284</td>
<td align="right">46.48118</td>
<td align="right">0</td>
<td align="right">0.000000</td>
<td align="right">45</td>
<td align="right">7.364975</td>
<td align="right">566</td>
<td align="right">92.63502</td>
<td align="right">1</td>
<td align="right">1.25</td>
<td align="right">-2.36</td>
<td align="right">0.1666417</td>
<td align="right">6.0008987</td>
<td align="left">EPIEDMONT</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">22</td>
<td align="right">3.666667</td>
</tr>
<tr class="even">
<td align="left">MBSS.2005.Fish</td>
<td align="left">ATKI-101-X-2016</td>
<td align="left">EPIEDMONT</td>
<td align="right">393.0800</td>
<td align="right">75</td>
<td align="right">2.575</td>
<td align="right">193.125</td>
<td align="right">470</td>
<td align="right">2.4336570</td>
<td align="right">41.48936</td>
<td align="right">1377</td>
<td align="right">7.130097</td>
<td align="right">2.2647461</td>
<td align="right">0</td>
<td align="right">0.00000</td>
<td align="right">272</td>
<td align="right">57.87234</td>
<td align="right">195</td>
<td align="right">41.489362</td>
<td align="right">295</td>
<td align="right">62.76596</td>
<td align="right">0</td>
<td align="right">0.000000</td>
<td align="right">195</td>
<td align="right">41.489362</td>
<td align="right">215</td>
<td align="right">45.74468</td>
<td align="right">2</td>
<td align="right">1.25</td>
<td align="right">-2.36</td>
<td align="right">0.8831012</td>
<td align="right">2.2647461</td>
<td align="left">EPIEDMONT</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">26</td>
<td align="right">4.333333</td>
</tr>
<tr class="odd">
<td align="left">MBSS.2005.Fish</td>
<td align="left">ATKI-102-X-2016</td>
<td align="left">EPIEDMONT</td>
<td align="right">146.0700</td>
<td align="right">75</td>
<td align="right">1.925</td>
<td align="right">144.375</td>
<td align="right">622</td>
<td align="right">4.3082251</td>
<td align="right">69.13183</td>
<td align="right">1389</td>
<td align="right">9.620779</td>
<td align="right">2.8926708</td>
<td align="right">0</td>
<td align="right">0.00000</td>
<td align="right">577</td>
<td align="right">92.76527</td>
<td align="right">45</td>
<td align="right">7.234727</td>
<td align="right">192</td>
<td align="right">30.86817</td>
<td align="right">0</td>
<td align="right">0.000000</td>
<td align="right">45</td>
<td align="right">7.234727</td>
<td align="right">577</td>
<td align="right">92.76527</td>
<td align="right">1</td>
<td align="right">1.25</td>
<td align="right">-2.36</td>
<td align="right">0.3457013</td>
<td align="right">2.8926708</td>
<td align="left">EPIEDMONT</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">20</td>
<td align="right">3.333333</td>
</tr>
<tr class="even">
<td align="left">MBSS.2005.Fish</td>
<td align="left">ATKI-104-R-2016</td>
<td align="left">EPIEDMONT</td>
<td align="right">563.1029</td>
<td align="right">75</td>
<td align="right">2.425</td>
<td align="right">181.875</td>
<td align="right">583</td>
<td align="right">3.2054983</td>
<td align="right">54.37393</td>
<td align="right">1438</td>
<td align="right">7.906529</td>
<td align="right">0.9274419</td>
<td align="right">0</td>
<td align="right">0.00000</td>
<td align="right">262</td>
<td align="right">44.93997</td>
<td align="right">317</td>
<td align="right">54.373928</td>
<td align="right">425</td>
<td align="right">72.89880</td>
<td align="right">0</td>
<td align="right">0.000000</td>
<td align="right">317</td>
<td align="right">54.373928</td>
<td align="right">198</td>
<td align="right">33.96226</td>
<td align="right">1</td>
<td align="right">1.25</td>
<td align="right">-2.36</td>
<td align="right">1.0782347</td>
<td align="right">0.9274419</td>
<td align="left">EPIEDMONT</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">28</td>
<td align="right">4.666667</td>
</tr>
</tbody>
</table>
</div>
<div id="ibi-benthic-macroinvertebrates-mbss" class="section level3">
<h3 class="hasAnchor">
<a href="#ibi-benthic-macroinvertebrates-mbss" class="anchor"></a>IBI, Benthic Macroinvertebrates, MBSS</h3>
<p>Bug metric values assumes the following fields (all upper case)</p>
<ul>
<li><p>SITE = MBSS sample identifier.</p></li>
<li><p>TAXON = MBSS benthic macroinvertebrate name.</p></li>
<li><p>N_TAXA = Number of taxon collected in sample.</p></li>
<li><p>EXCLUDE = Non-unique taxa (i.e., parent taxon with one or more children taxa present in sample). “Y” = do not include in taxa richness metrics. * STRATA_R = Benthic macroinvertebrate region (COASTAL, EPIEDMONT, or HIGHLAND).</p></li>
<li><p>Phylogenetic fields</p></li>
<li><p>(PHYLUM), CLASS, ORDER, FAMILY, GENUS, OTHER_TAXA, TRIBE, FFG, HABIT, FINALTOLVAL07</p></li>
</ul>
<p>Valid values for FFG: col, fil, pre, scr, shr</p>
<p>Valid values for HABIT: BU, CB, CN, SP, SW</p>
<p>MSW data should be first combined to family level and EXCLUDE recalculated.</p>
<p>Additional fields needed:</p>
<ul>
<li>FAM_TV (need to include all the same fields, just leave blank).</li>
</ul>
<p>In addition to the metric scores a QC check on samples with too many (&gt;120) or too few (&lt;60) organisms is returned in the results. Those with more than the maximum (120) should be subsampled down to within the target range.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># Metrics, Index, Benthic Macroinvertebrates, genus</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co"># (generate values then scores)</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>myIndex &lt;-<span class="st"> "MBSS.2005.Bugs"</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co"># Thresholds</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>thresh &lt;-<span class="st"> </span>metrics_scoring</span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co"># get metric names for myIndex</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>(myMetrics.Bugs.MBSS &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/droplevels.html">droplevels</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(thresh[thresh[,<span class="st">"Index.Name"</span>]<span class="op">==</span>myIndex,<span class="st">"MetricName.Other"</span>]))))</span></code></pre></div>
<pre><code>##  [1] "ntaxa"      "nept"       "nephem"     "pintol_urb" "pephem"    
##  [6] "nscrape"    "pclimb"     "pchiron"    "pcling"     "ptany"     
## [11] "pscrape"    "pswim"      "pdipt"</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># Taxa Data</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>myDF.Bugs.MBSS &lt;-<span class="st"> </span>taxa_bugs_genus</span>
<span id="cb8-3"><a href="#cb8-3"></a>myMetric.Values.Bugs.MBSS &lt;-<span class="st"> </span><span class="kw"><a href="../reference/metric.values.html">metric.values</a></span>(myDF.Bugs.MBSS, <span class="st">"bugs"</span>, myMetrics.Bugs.MBSS)</span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">#View(myMetric.Values.Bugs.MBSS)</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co"># SCORE</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>Metrics.Bugs.Scores.MBSS &lt;-<span class="st"> </span><span class="kw"><a href="../reference/metric.scores.html">metric.scores</a></span>(myMetric.Values.Bugs.MBSS, myMetrics.Bugs.MBSS, <span class="st">"INDEX.NAME"</span>, <span class="st">"STRATA_R"</span>, thresh)</span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co"># View Results</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#View(Metrics.Bugs.Scores.MBSS)</span></span>
<span id="cb8-9"><a href="#cb8-9"></a></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co"># QC bug count</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>Metrics.Bugs.Scores.MBSS[Metrics.Bugs.Scores.MBSS[,<span class="st">"totind"</span>]<span class="op">&gt;</span><span class="dv">120</span>,<span class="st">"QC_Count"</span>] &lt;-<span class="st"> "LARGE"</span></span>
<span id="cb8-12"><a href="#cb8-12"></a>Metrics.Bugs.Scores.MBSS[Metrics.Bugs.Scores.MBSS[,<span class="st">"totind"</span>]<span class="op">&lt;</span><span class="dv">60</span>,<span class="st">"QC_Count"</span>] &lt;-<span class="st"> "SMALL"</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>Metrics.Bugs.Scores.MBSS[<span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(Metrics.Bugs.Scores.MBSS[,<span class="st">"QC_Count"</span>]),<span class="st">"QC_Count"</span>] &lt;-<span class="st"> "OK"</span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="co"># table of QC_Count</span></span>
<span id="cb8-15"><a href="#cb8-15"></a>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(Metrics.Bugs.Scores.MBSS))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">SITE</th>
<th align="left">STRATA_R</th>
<th align="left">INDEX.NAME</th>
<th align="right">totind</th>
<th align="right">ntaxa</th>
<th align="right">nept</th>
<th align="right">nephem</th>
<th align="right">totephem</th>
<th align="right">nscrape</th>
<th align="right">totclimb</th>
<th align="right">totchiron</th>
<th align="right">totcling</th>
<th align="right">tottany</th>
<th align="right">totscrape</th>
<th align="right">totswim</th>
<th align="right">totdipt</th>
<th align="right">totintol_urb</th>
<th align="right">pephem</th>
<th align="right">pclimb</th>
<th align="right">pchiron</th>
<th align="right">pcling</th>
<th align="right">ptany</th>
<th align="right">pscrape</th>
<th align="right">pswim</th>
<th align="right">pdipt</th>
<th align="right">pintol_urb</th>
<th align="right">ndipt</th>
<th align="right">nintol</th>
<th align="right">becks</th>
<th align="right">nintol_FAM</th>
<th align="left">Index.Name</th>
<th align="left">Index.Region</th>
<th align="right">SC_ntaxa</th>
<th align="right">SC_nept</th>
<th align="right">SC_nephem</th>
<th align="right">SC_pintol_urb</th>
<th align="right">SC_pephem</th>
<th align="right">SC_nscrape</th>
<th align="right">SC_pclimb</th>
<th align="right">SC_pchiron</th>
<th align="right">SC_pcling</th>
<th align="right">SC_ptany</th>
<th align="right">SC_pscrape</th>
<th align="right">SC_pswim</th>
<th align="right">SC_pdipt</th>
<th align="right">sum_IBI</th>
<th align="right">IBI</th>
<th align="left">QC_Count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ABPG-204-R-2016</td>
<td align="left">COASTAL</td>
<td align="left">MBSS.2005.Bugs</td>
<td align="right">124</td>
<td align="right">21</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">23</td>
<td align="right">51</td>
<td align="right">48</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">54</td>
<td align="right">15</td>
<td align="right">3.2258065</td>
<td align="right">18.54839</td>
<td align="right">41.12903</td>
<td align="right">38.70968</td>
<td align="right">4.032258</td>
<td align="right">0.000000</td>
<td align="right">0.0000000</td>
<td align="right">43.54839</td>
<td align="right">12.096774</td>
<td align="right">15</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="left">MBSS.2005.Bugs</td>
<td align="left">COASTAL</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">21</td>
<td align="right">3.000000</td>
<td align="left">LARGE</td>
</tr>
<tr class="even">
<td align="left">ANTI-101-S-2016</td>
<td align="left">HIGHLAND</td>
<td align="left">MBSS.2005.Bugs</td>
<td align="right">128</td>
<td align="right">25</td>
<td align="right">16</td>
<td align="right">6</td>
<td align="right">49</td>
<td align="right">3</td>
<td align="right">16</td>
<td align="right">16</td>
<td align="right">112</td>
<td align="right">2</td>
<td align="right">30</td>
<td align="right">23</td>
<td align="right">31</td>
<td align="right">98</td>
<td align="right">38.2812500</td>
<td align="right">12.50000</td>
<td align="right">12.50000</td>
<td align="right">87.50000</td>
<td align="right">1.562500</td>
<td align="right">23.437500</td>
<td align="right">17.9687500</td>
<td align="right">24.21875</td>
<td align="right">76.562500</td>
<td align="right">9</td>
<td align="right">14</td>
<td align="right">26</td>
<td align="right">9</td>
<td align="left">MBSS.2005.Bugs</td>
<td align="left">HIGHLAND</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">34</td>
<td align="right">4.250000</td>
<td align="left">LARGE</td>
</tr>
<tr class="odd">
<td align="left">ATKI-003-X-2016</td>
<td align="left">EPIEDMONT</td>
<td align="left">MBSS.2005.Bugs</td>
<td align="right">121</td>
<td align="right">22</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">18</td>
<td align="right">92</td>
<td align="right">37</td>
<td align="right">6</td>
<td align="right">14</td>
<td align="right">1</td>
<td align="right">96</td>
<td align="right">6</td>
<td align="right">0.8264463</td>
<td align="right">14.87603</td>
<td align="right">76.03306</td>
<td align="right">30.57851</td>
<td align="right">4.958678</td>
<td align="right">11.570248</td>
<td align="right">0.8264463</td>
<td align="right">79.33884</td>
<td align="right">4.958678</td>
<td align="right">16</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="left">MBSS.2005.Bugs</td>
<td align="left">EPIEDMONT</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">8</td>
<td align="right">1.333333</td>
<td align="left">LARGE</td>
</tr>
<tr class="even">
<td align="left">ATKI-101-X-2016</td>
<td align="left">EPIEDMONT</td>
<td align="left">MBSS.2005.Bugs</td>
<td align="right">116</td>
<td align="right">20</td>
<td align="right">6</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">1</td>
<td align="right">21</td>
<td align="right">58</td>
<td align="right">78</td>
<td align="right">1</td>
<td align="right">9</td>
<td align="right">7</td>
<td align="right">65</td>
<td align="right">15</td>
<td align="right">6.0344828</td>
<td align="right">18.10345</td>
<td align="right">50.00000</td>
<td align="right">67.24138</td>
<td align="right">0.862069</td>
<td align="right">7.758621</td>
<td align="right">6.0344828</td>
<td align="right">56.03448</td>
<td align="right">12.931035</td>
<td align="right">12</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="left">MBSS.2005.Bugs</td>
<td align="left">EPIEDMONT</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">16</td>
<td align="right">2.666667</td>
<td align="left">OK</td>
</tr>
<tr class="odd">
<td align="left">ATKI-102-X-2016</td>
<td align="left">EPIEDMONT</td>
<td align="left">MBSS.2005.Bugs</td>
<td align="right">125</td>
<td align="right">13</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">6</td>
<td align="right">117</td>
<td align="right">2</td>
<td align="right">6</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">117</td>
<td align="right">5</td>
<td align="right">0.0000000</td>
<td align="right">4.80000</td>
<td align="right">93.60000</td>
<td align="right">1.60000</td>
<td align="right">4.800000</td>
<td align="right">0.800000</td>
<td align="right">0.0000000</td>
<td align="right">93.60000</td>
<td align="right">4.000000</td>
<td align="right">11</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="left">MBSS.2005.Bugs</td>
<td align="left">EPIEDMONT</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">1.000000</td>
<td align="left">LARGE</td>
</tr>
<tr class="even">
<td align="left">ATKI-104-R-2016</td>
<td align="left">EPIEDMONT</td>
<td align="left">MBSS.2005.Bugs</td>
<td align="right">118</td>
<td align="right">27</td>
<td align="right">10</td>
<td align="right">2</td>
<td align="right">22</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">36</td>
<td align="right">85</td>
<td align="right">0</td>
<td align="right">7</td>
<td align="right">20</td>
<td align="right">54</td>
<td align="right">39</td>
<td align="right">18.6440678</td>
<td align="right">3.38983</td>
<td align="right">30.50847</td>
<td align="right">72.03390</td>
<td align="right">0.000000</td>
<td align="right">5.932203</td>
<td align="right">16.9491525</td>
<td align="right">45.76271</td>
<td align="right">33.050848</td>
<td align="right">14</td>
<td align="right">8</td>
<td align="right">15</td>
<td align="right">6</td>
<td align="left">MBSS.2005.Bugs</td>
<td align="left">EPIEDMONT</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">20</td>
<td align="right">3.333333</td>
<td align="left">OK</td>
</tr>
</tbody>
</table>
</div>
<div id="ibi-benthic-macroinvertebrates-msw" class="section level3">
<h3 class="hasAnchor">
<a href="#ibi-benthic-macroinvertebrates-msw" class="anchor"></a>IBI, Benthic Macroinvertebrates, MSW</h3>
<p>The Maryland Stream Wader index is from Stribling et al. 1999. Family level identifications need to be provided by the user. Metric values and scores shown below for example data. This index has only two bioregions (CP = Coastal Plain and NCP = Non-Coastal Plain).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># Metrics, MSW Index, Benthic Macroinvertebrates, family</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>myIndex &lt;-<span class="st"> "MSW.1999.Bugs"</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co"># Thresholds</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>thresh &lt;-<span class="st"> </span>metrics_scoring</span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co"># get metric names for myIndex</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>(myMetrics.Bugs.MSW &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/droplevels.html">droplevels</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(thresh[thresh[,<span class="st">"Index.Name"</span>]<span class="op">==</span>myIndex,<span class="st">"MetricName.Other"</span>]))))</span></code></pre></div>
<pre><code>## [1] "ntaxa"      "nept"       "nephem"     "ndipt"      "pephem"    
## [6] "nintol_FAM" "becks"</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># Taxa Data</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>myDF.Bugs.MSW &lt;-<span class="st"> </span>taxa_bugs_family</span>
<span id="cb11-3"><a href="#cb11-3"></a>myMetric.Values.Bugs.MSW &lt;-<span class="st"> </span><span class="kw"><a href="../reference/metric.values.html">metric.values</a></span>(myDF.Bugs.MSW, <span class="st">"bugs"</span>, myMetrics.Bugs.MSW)</span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co">#View(myMetric.Values.Bugs.MSW)</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co"># SCORE</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>Metrics.Bugs.Scores.MSW &lt;-<span class="st"> </span><span class="kw"><a href="../reference/metric.scores.html">metric.scores</a></span>(myMetric.Values.Bugs.MSW, myMetrics.Bugs.MSW, <span class="st">"INDEX.NAME"</span>, <span class="st">"STRATA_R"</span>, thresh)</span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="co"># View Results</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(Metrics.Bugs.Scores.MSW))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">SITE</th>
<th align="left">STRATA_R</th>
<th align="left">INDEX.NAME</th>
<th align="right">totind</th>
<th align="right">ntaxa</th>
<th align="right">nept</th>
<th align="right">nephem</th>
<th align="right">totephem</th>
<th align="right">nscrape</th>
<th align="right">totclimb</th>
<th align="right">totchiron</th>
<th align="right">totcling</th>
<th align="right">tottany</th>
<th align="right">totscrape</th>
<th align="right">totswim</th>
<th align="right">totdipt</th>
<th align="right">totintol_urb</th>
<th align="right">pephem</th>
<th align="right">pclimb</th>
<th align="right">pchiron</th>
<th align="right">pcling</th>
<th align="right">ptany</th>
<th align="right">pscrape</th>
<th align="right">pswim</th>
<th align="right">pdipt</th>
<th align="right">pintol_urb</th>
<th align="right">ndipt</th>
<th align="right">nintol</th>
<th align="right">becks</th>
<th align="right">nintol_FAM</th>
<th align="left">Index.Name</th>
<th align="left">Index.Region</th>
<th align="right">SC_ntaxa</th>
<th align="right">SC_nept</th>
<th align="right">SC_nephem</th>
<th align="right">SC_ndipt</th>
<th align="right">SC_pephem</th>
<th align="right">SC_nintol_FAM</th>
<th align="right">SC_becks</th>
<th align="right">sum_IBI</th>
<th align="right">IBI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ABPG-204-R-2016</td>
<td align="left">CP</td>
<td align="left">MSW.1999.Bugs</td>
<td align="right">124</td>
<td align="right">9</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">51</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">54</td>
<td align="right">0</td>
<td align="right">3.2258065</td>
<td align="right">0</td>
<td align="right">41.12903</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">43.54839</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="left">MSW.1999.Bugs</td>
<td align="left">CP</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">17</td>
<td align="right">2.428571</td>
</tr>
<tr class="even">
<td align="left">ANTI-101-S-2016</td>
<td align="left">NCP</td>
<td align="left">MSW.1999.Bugs</td>
<td align="right">128</td>
<td align="right">16</td>
<td align="right">13</td>
<td align="right">5</td>
<td align="right">49</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">16</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">31</td>
<td align="right">0</td>
<td align="right">38.2812500</td>
<td align="right">0</td>
<td align="right">12.50000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">24.21875</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">9</td>
<td align="left">MSW.1999.Bugs</td>
<td align="left">NCP</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">31</td>
<td align="right">4.428571</td>
</tr>
<tr class="odd">
<td align="left">ATKI-003-X-2016</td>
<td align="left">NCP</td>
<td align="left">MSW.1999.Bugs</td>
<td align="right">121</td>
<td align="right">8</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">92</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">96</td>
<td align="right">0</td>
<td align="right">0.8264463</td>
<td align="right">0</td>
<td align="right">76.03306</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">79.33884</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="left">MSW.1999.Bugs</td>
<td align="left">NCP</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">11</td>
<td align="right">1.571429</td>
</tr>
<tr class="even">
<td align="left">ATKI-101-X-2016</td>
<td align="left">NCP</td>
<td align="left">MSW.1999.Bugs</td>
<td align="right">116</td>
<td align="right">9</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">58</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">65</td>
<td align="right">0</td>
<td align="right">6.0344828</td>
<td align="right">0</td>
<td align="right">50.00000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">56.03448</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="left">MSW.1999.Bugs</td>
<td align="left">NCP</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">17</td>
<td align="right">2.428571</td>
</tr>
<tr class="odd">
<td align="left">ATKI-102-X-2016</td>
<td align="left">NCP</td>
<td align="left">MSW.1999.Bugs</td>
<td align="right">125</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">117</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">117</td>
<td align="right">0</td>
<td align="right">0.0000000</td>
<td align="right">0</td>
<td align="right">93.60000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">93.60000</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="left">MSW.1999.Bugs</td>
<td align="left">NCP</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">1.000000</td>
</tr>
<tr class="even">
<td align="left">ATKI-104-R-2016</td>
<td align="left">NCP</td>
<td align="left">MSW.1999.Bugs</td>
<td align="right">118</td>
<td align="right">14</td>
<td align="right">8</td>
<td align="right">2</td>
<td align="right">22</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">36</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">54</td>
<td align="right">0</td>
<td align="right">18.6440678</td>
<td align="right">0</td>
<td align="right">30.50847</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">45.76271</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">6</td>
<td align="left">MSW.1999.Bugs</td>
<td align="left">NCP</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">23</td>
<td align="right">3.285714</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="fish-distribution-maps" class="section level2">
<h2 class="hasAnchor">
<a href="#fish-distribution-maps" class="anchor"></a>Fish Distribution Maps</h2>
<p>The intent of this function is to recreate the taxa distribution maps on the MBSS websitehttp://eyesonthebay.dnr.maryland.gov/mbss/fishes.cfm. The maps for all taxa can be generated from a single line of code and then given to the web site maintainers as replacements.</p>
<p>The maps for all taxa can be generated from a single line of code and then given to the web site maintainers as replacements. The maps generated with this function use a ‘crosswalk’ table that converts taxa names to map names.</p>
<p>The function MapTaxaObs() requires the <code>readxl</code> and <code>rgdal</code> packages.</p>
<div id="data-inputs" class="section level3">
<h3 class="hasAnchor">
<a href="#data-inputs" class="anchor"></a>Data inputs</h3>
<p>The user will need GIS files for the state of Maryland for State, County, and Water.</p>
<p>The inputs for this function, besides the three GIS shapefiles, are taxa observations and a taxa name crosswalk (translation) table between taxa names and map names.</p>
<p>All inputs are included in the <code>MBSStools</code> library and can be copied to the current directory with the code below.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Set Working Directory</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>wd &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span>()</span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="co"># Create Example Data if Needed</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co">## Create Directories</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>myDir.create &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(wd,<span class="st">"Data"</span>)</span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/files2.html">dir.exists</a></span>(myDir.create)<span class="op">==</span><span class="ot">FALSE</span>,<span class="kw"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span>(myDir.create),<span class="st">"Directory already exists"</span>)</span>
<span id="cb12-7"><a href="#cb12-7"></a>myDir.create &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(wd,<span class="st">"GIS"</span>)</span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/files2.html">dir.exists</a></span>(myDir.create)<span class="op">==</span><span class="ot">FALSE</span>,<span class="kw"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span>(myDir.create),<span class="st">"Directory already exists"</span>)</span>
<span id="cb12-9"><a href="#cb12-9"></a>myDir.create &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(wd,<span class="st">"Maps"</span>)</span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/files2.html">dir.exists</a></span>(myDir.create)<span class="op">==</span><span class="ot">FALSE</span>,<span class="kw"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span>(myDir.create),<span class="st">"Directory already exists"</span>)</span>
<span id="cb12-11"><a href="#cb12-11"></a><span class="co">## Create Data</span></span>
<span id="cb12-12"><a href="#cb12-12"></a><span class="co">### Taxa Data</span></span>
<span id="cb12-13"><a href="#cb12-13"></a>myFiles &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"AllFish_95to16.xls"</span>, <span class="st">"TaxaMapsCrossWalk20170731.xlsx"</span>)</span>
<span id="cb12-14"><a href="#cb12-14"></a><span class="kw"><a href="https://rdrr.io/r/base/files.html">file.copy</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/find.package.html">path.package</a></span>(<span class="st">"MBSStools"</span>),<span class="st">"extdata"</span>,myFiles),<span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(wd,<span class="st">"Data"</span>,myFiles))</span>
<span id="cb12-15"><a href="#cb12-15"></a><span class="co">### GIS</span></span>
<span id="cb12-16"><a href="#cb12-16"></a><span class="kw"><a href="https://rdrr.io/r/utils/unzip.html">unzip</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/find.package.html">path.package</a></span>(<span class="st">"MBSStools"</span>),<span class="st">"extdata"</span>,<span class="st">"MD_GIS.zip"</span>),<span class="dt">exdir=</span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(wd,<span class="st">"GIS"</span>))</span></code></pre></div>
</div>
<div id="example-input-data" class="section level3">
<h3 class="hasAnchor">
<a href="#example-input-data" class="anchor"></a>Example Input Data</h3>
<p>Observation data with three columns needed for the tool to work (common name, latitude, and longitude). Additional columns can be appended (e.g., SiteYr) and will not affect the functionality.</p>
<pre><code>## Loading required package: XLConnectJars</code></pre>
<pre><code>## XLConnect 0.2-15 by Mirai Solutions GmbH [aut],
##   Martin Studer [cre],
##   The Apache Software Foundation [ctb, cph] (Apache POI),
##   Graph Builder [ctb, cph] (Curvesapi Java library)</code></pre>
<pre><code>## http://www.mirai-solutions.com
## https://github.com/miraisolutions/xlconnect</code></pre>
<pre><code>##             CommonName Latitude83 Longitude83          SITEYR
## 1    eastern mudminnow     39.055   -76.73417 AA-N-003-025-95
## 2           creek chub     39.055   -76.73417 AA-N-003-025-95
## 3      channel catfish     39.055   -76.73417 AA-N-003-025-95
## 4        glassy darter     39.055   -76.73417 AA-N-003-025-95
## 5 eastern mosquitofish     39.055   -76.73417 AA-N-003-025-95
## 6        golden shiner     39.055   -76.73417 AA-N-003-025-95</code></pre>
<p>Crosswalk data with common name and map name.</p>
<pre><code>##         CommonName  MapName
## 1          alewife  alewife
## 2     american eel  amereel
## 3    american shad amershad
## 4    banded darter bandartr
## 5 banded killifish bankilli
## 6    black crappie blkcrapi</code></pre>
</div>
</div>
<div id="map-creation" class="section level2">
<h2 class="hasAnchor">
<a href="#map-creation" class="anchor"></a>Map Creation</h2>
<p>The code below can be used to generate the maps (n=131) associated with the 1995 to 2016 data. Any taxa without a match in the crosswalk table (n=54) are listed in a CSV file and the number reported to the user in the R console but maps are not generated (by default). If the user wants all maps then the parameter ‘onlymatches’ should be set to ‘FALSE’ (as in the example below).</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># Set Working Directory</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>wd &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span>()</span>
<span id="cb18-3"><a href="#cb18-3"></a></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="co"># Inputs</span></span>
<span id="cb18-5"><a href="#cb18-5"></a>Obs &lt;-<span class="st"> "AllFish_95to16.xls"</span></span>
<span id="cb18-6"><a href="#cb18-6"></a>XWalk &lt;-<span class="st"> "TaxaMapsCrossWalk20170731.xlsx"</span></span>
<span id="cb18-7"><a href="#cb18-7"></a>wd &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span>()</span>
<span id="cb18-8"><a href="#cb18-8"></a></span>
<span id="cb18-9"><a href="#cb18-9"></a><span class="co"># Create maps</span></span>
<span id="cb18-10"><a href="#cb18-10"></a><span class="kw"><a href="../reference/MapTaxaObs.html">MapTaxaObs</a></span>(Obs, XWalk, wd, <span class="dt">onlymatches =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<p>The intent behind this function was to recreate the fish taxa distribution maps. But the data inputs are not specific to fish and can be used for benthic macroinvertebrate data.</p>
<p>The taxa distribution map for brown trout is shown below.</p>
</div>
<div id="stream-discharge" class="section level2">
<h2 class="hasAnchor">
<a href="#stream-discharge" class="anchor"></a>Stream Discharge</h2>
<p>Calculate stream discharge based on field measurements. Side channels that are properly identified in the data will be included.</p>
<p>The function FlowSum() requires the no additional packages.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(MBSStools)</span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="co"># data</span></span>
<span id="cb19-3"><a href="#cb19-3"></a>MBSS.flow &lt;-<span class="st"> </span>MBSS.flow</span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="co"># calculate flow</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>flow.cell &lt;-<span class="st"> </span><span class="kw"><a href="../reference/FlowSum.html">FlowSum</a></span>(MBSS.flow, <span class="dt">returnType=</span><span class="st">"cell"</span>)</span>
<span id="cb19-6"><a href="#cb19-6"></a>flow.sample &lt;-<span class="st"> </span><span class="kw"><a href="../reference/FlowSum.html">FlowSum</a></span>(MBSS.flow)</span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="co"># examine data</span></span>
<span id="cb19-8"><a href="#cb19-8"></a><span class="kw"><a href="https://rdrr.io/r/utils/View.html">View</a></span>(flow.cell)</span>
<span id="cb19-9"><a href="#cb19-9"></a><span class="kw"><a href="https://rdrr.io/r/utils/View.html">View</a></span>(flow.sample)</span>
<span id="cb19-10"><a href="#cb19-10"></a><span class="co"># Example Save file (tab delimited text file)</span></span>
<span id="cb19-11"><a href="#cb19-11"></a>datetime &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/format.html">format</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span>(),<span class="st">"%Y%m%d_%H%M%S"</span>)</span>
<span id="cb19-12"><a href="#cb19-12"></a>myYear &lt;-<span class="st"> "15"</span></span>
<span id="cb19-13"><a href="#cb19-13"></a><span class="kw"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span>(flow.sample,<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"SumFlow"</span>,myYear,<span class="st">"_"</span>,datetime,<span class="st">".tab"</span>),<span class="dt">row.names=</span><span class="ot">FALSE</span>,<span class="dt">sep=</span><span class="st">"</span><span class="ch">\t</span><span class="st">"</span>)</span></code></pre></div>
</div>
<div id="ion-matrix" class="section level2">
<h2 class="hasAnchor">
<a href="#ion-matrix" class="anchor"></a>Ion Matrix</h2>
<p>The IonContrib() function calculates conductivity contribution from provided ion concentrations using Kohlrausch’s Law. If a total conductivity measurement is not provided the total conductivity is calculated as the sum of all ions present in the data. If the user provides a conductivity measurement then ion contributions are a percentage of that number. In the latter case “Other” is added as an ion to capture any percentage of total conductivity not represented by the provided ions. Plotting is done outside of this function.</p>
<p>Data will need to be in “wide” format. That is, a single record for each sample and the ions to be analyzed in columns.</p>
<p>A reference table of ions and their equivalent ionic conductance at infinite dilution is provided with the function as “MBSS.Ion.Ref”. The function allows for input of a user supplied data frame if this table needs updating with more ions.</p>
<p>The function IonContrib() requires the no additional packages.</p>
<table class="table">
<thead><tr class="header">
<th align="left">Name</th>
<th align="left">Ion</th>
<th align="left">Symbol</th>
<th align="right">Molecular Weight (g/mole)</th>
<th align="right">Valance</th>
<th align="right">Equivalent Ionic conductance at infinite dilution (µS/cm)</th>
<th align="right">Multiplier</th>
<th align="right">SortOrder</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Calcium (mg/L)</td>
<td align="left">Calcium</td>
<td align="left">Ca2+</td>
<td align="right">40.07800</td>
<td align="right">2</td>
<td align="right">59.47</td>
<td align="right">2.9677130</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Magnesium (mg/L)</td>
<td align="left">Magnesium</td>
<td align="left">Mg2+</td>
<td align="right">24.30500</td>
<td align="right">2</td>
<td align="right">53.00</td>
<td align="right">4.3612425</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">Sodium (mg/L)</td>
<td align="left">Sodium</td>
<td align="left">Na+</td>
<td align="right">22.98977</td>
<td align="right">1</td>
<td align="right">50.08</td>
<td align="right">2.1783604</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">Potassium (mg/L)</td>
<td align="left">Potassium</td>
<td align="left">K+</td>
<td align="right">39.09830</td>
<td align="right">1</td>
<td align="right">73.48</td>
<td align="right">1.8793656</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">Bicarbonate (mg/L)</td>
<td align="left">Bicarbonate</td>
<td align="left">HCO3-</td>
<td align="right">61.01714</td>
<td align="right">1</td>
<td align="right">44.50</td>
<td align="right">0.7293033</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">Sulfate (mg/L)</td>
<td align="left">Sulfate</td>
<td align="left">SO42-</td>
<td align="right">96.06360</td>
<td align="right">2</td>
<td align="right">80.00</td>
<td align="right">1.6655632</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">Chloride (mg/L)</td>
<td align="left">Chloride</td>
<td align="left">Cl-</td>
<td align="right">35.45270</td>
<td align="right">1</td>
<td align="right">76.31</td>
<td align="right">2.1524454</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">Iron (II) (mg/L)</td>
<td align="left">Iron (II)</td>
<td align="left">Fe2+</td>
<td align="right">55.84700</td>
<td align="right">2</td>
<td align="right">54.00</td>
<td align="right">1.9338550</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Iron (III) (mg/L)</td>
<td align="left">Iron (III)</td>
<td align="left">Fe3+</td>
<td align="right">55.84700</td>
<td align="right">3</td>
<td align="right">68.00</td>
<td align="right">3.6528372</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">Bromide (mg/L)</td>
<td align="left">Bromide</td>
<td align="left">Br-</td>
<td align="right">79.90400</td>
<td align="right">1</td>
<td align="right">78.10</td>
<td align="right">0.9774229</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">Strontium (mg/L)</td>
<td align="left">Strontium</td>
<td align="left">Sr2+</td>
<td align="right">87.62000</td>
<td align="right">2</td>
<td align="right">59.40</td>
<td align="right">1.3558548</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">Nitrate-N (mg/L)</td>
<td align="left">Nitrate-N</td>
<td align="left">NO3-</td>
<td align="right">14.00674</td>
<td align="right">1</td>
<td align="right">71.42</td>
<td align="right">5.0989738</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">Barium (mg/L)</td>
<td align="left">Barium</td>
<td align="left">Ba2+</td>
<td align="right">137.32700</td>
<td align="right">2</td>
<td align="right">63.60</td>
<td align="right">0.9262563</td>
<td align="right">13</td>
</tr>
</tbody>
</table>
<p>The columns for the ions need to match the reference table names. The function IonContrib() includes a reference table that is used by default but the user can supply their own reference table.</p>
<table class="table">
<thead><tr class="header">
<th align="left">Site</th>
<th align="left">Stream Name</th>
<th align="left">SHA Road Crossing</th>
<th align="left">Ion Matrix</th>
<th align="left">Date Collected</th>
<th align="left">Time Collected</th>
<th align="right">Chloride (mg/L)</th>
<th align="right">Bromide (mg/L)</th>
<th align="right">Nitrate-N (mg/L)</th>
<th align="right">Sulfate (mg/L)</th>
<th align="right">Sodium (mg/L)</th>
<th align="right">Potassium (mg/L)</th>
<th align="right">Magnesium (mg/L)</th>
<th align="right">Calcium (mg/L)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">BELK-101-X</td>
<td align="left">Gramies Run</td>
<td align="left">MD 273 (Telegraph Rd.)</td>
<td align="left">Pre-Application Baseline</td>
<td align="left">2016-12-14</td>
<td align="left">1899-12-30 10:48:00</td>
<td align="right">40.9854</td>
<td align="right">0.0255</td>
<td align="right">0.6209</td>
<td align="right">11.2139</td>
<td align="right">19.36</td>
<td align="right">1.897</td>
<td align="right">8.153</td>
<td align="right">12.11</td>
</tr>
<tr class="even">
<td align="left">BELK-102-X</td>
<td align="left">Gramies Run</td>
<td align="left">MD 273 (Telegraph Rd.)</td>
<td align="left">Pre-Application Baseline</td>
<td align="left">2016-12-14</td>
<td align="left">1899-12-30 10:59:00</td>
<td align="right">36.2214</td>
<td align="right">0.0244</td>
<td align="right">0.5236</td>
<td align="right">13.5295</td>
<td align="right">16.08</td>
<td align="right">2.103</td>
<td align="right">9.403</td>
<td align="right">14.09</td>
</tr>
<tr class="odd">
<td align="left">BELK-301-X</td>
<td align="left">Big Elk Creek</td>
<td align="left">MD 273 (Telegraph Rd.)</td>
<td align="left">Pre-Application Baseline</td>
<td align="left">2016-12-14</td>
<td align="left">1899-12-30 09:15:00</td>
<td align="right">31.3782</td>
<td align="right">0.0276</td>
<td align="right">4.8693</td>
<td align="right">13.5987</td>
<td align="right">14.06</td>
<td align="right">3.166</td>
<td align="right">6.906</td>
<td align="right">15.73</td>
</tr>
<tr class="even">
<td align="left">BELK-302-X</td>
<td align="left">Big Elk Creek</td>
<td align="left">MD 273 (Telegraph Rd.)</td>
<td align="left">Pre-Application Baseline</td>
<td align="left">2016-12-14</td>
<td align="left">1899-12-30 09:19:00</td>
<td align="right">30.4018</td>
<td align="right">0.0280</td>
<td align="right">4.5474</td>
<td align="right">13.7224</td>
<td align="right">14.01</td>
<td align="right">3.049</td>
<td align="right">6.583</td>
<td align="right">15.92</td>
</tr>
<tr class="odd">
<td align="left">BRIG-301-X</td>
<td align="left">Patuxent River</td>
<td align="left">MD 94 (Woodbine Rd.)</td>
<td align="left">Pre-Application Baseline</td>
<td align="left">2016-12-13</td>
<td align="left">1899-12-30 14:53:00</td>
<td align="right">37.2093</td>
<td align="right">0.0232</td>
<td align="right">3.0927</td>
<td align="right">4.2891</td>
<td align="right">19.02</td>
<td align="right">2.020</td>
<td align="right">5.977</td>
<td align="right">10.99</td>
</tr>
<tr class="even">
<td align="left">BRIG-302-X</td>
<td align="left">Patuxent River</td>
<td align="left">MD 94 (Woodbine Rd.)</td>
<td align="left">Pre-Application Baseline</td>
<td align="left">2016-12-13</td>
<td align="left">1899-12-30 15:02:00</td>
<td align="right">37.6789</td>
<td align="right">0.0215</td>
<td align="right">3.0869</td>
<td align="right">4.2854</td>
<td align="right">18.62</td>
<td align="right">2.035</td>
<td align="right">5.958</td>
<td align="right">11.00</td>
</tr>
</tbody>
</table>
<p>Example code is below. The user would then save the output (e.g., write.csv()).</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(MBSStools)</span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="co"># Load Data</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>data.ion &lt;-<span class="st"> </span>MBSS.Ion.Data</span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="co"># Load Reference Table</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>ref.ion &lt;-<span class="st"> </span>MBSS.Ion.Ref</span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="co"># Calculate Percent Contribution by Ion (data table only)</span></span>
<span id="cb20-7"><a href="#cb20-7"></a>contrib.ion &lt;-<span class="st"> </span><span class="kw"><a href="../reference/IonContrib.html">IonContrib</a></span>(data.ion)</span></code></pre></div>
<p><em>No</em> conductivity values provided.<br>
Ion contributions calculated from the sum of calculated ion conductivity values.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co">#knitr::kable(head(contrib.ion))</span></span></code></pre></div>
<p>Dot charts are a good way to display the data. But any chart of the user’s preference can be used.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="co"># Load Data</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>data.ion &lt;-<span class="st"> </span>MBSS.Ion.Data</span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="co"># Load Reference Table</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>ref.ion &lt;-<span class="st"> </span>MBSS.Ion.Ref</span>
<span id="cb22-5"><a href="#cb22-5"></a><span class="co"># Calculate Percent Contribution by Ion (data table only)</span></span>
<span id="cb22-6"><a href="#cb22-6"></a>contrib.ion &lt;-<span class="st"> </span><span class="kw"><a href="../reference/IonContrib.html">IonContrib</a></span>(data.ion)</span>
<span id="cb22-7"><a href="#cb22-7"></a><span class="co">#View(contrib.ion)</span></span>
<span id="cb22-8"><a href="#cb22-8"></a><span class="co"># Calculate Percent Contribution by Ion (data table and reference table)</span></span>
<span id="cb22-9"><a href="#cb22-9"></a>contrib.ion<span class="fl">.2</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/IonContrib.html">IonContrib</a></span>(data.ion, ref.ion)</span>
<span id="cb22-10"><a href="#cb22-10"></a><span class="co">#View(contrib.ion.2)</span></span>
<span id="cb22-11"><a href="#cb22-11"></a><span class="co"># Calculate Percent Contribution by Ion (data table, reference table, and conductivity values)</span></span>
<span id="cb22-12"><a href="#cb22-12"></a><span class="co"># ## add dummy conductivity values for each sample</span></span>
<span id="cb22-13"><a href="#cb22-13"></a><span class="co"># myCond &lt;- "Cond"</span></span>
<span id="cb22-14"><a href="#cb22-14"></a><span class="co"># data.ion[,myCond] &lt;- 4000</span></span>
<span id="cb22-15"><a href="#cb22-15"></a><span class="co"># contrib.ion.3 &lt;- IonContrib(data.ion, ref.ion, myCond)</span></span>
<span id="cb22-16"><a href="#cb22-16"></a><span class="co"># View(contrib.ion.3)</span></span>
<span id="cb22-17"><a href="#cb22-17"></a><span class="co"># Save Results (use write.table())</span></span>
<span id="cb22-18"><a href="#cb22-18"></a><span class="co"># Plot Results</span></span>
<span id="cb22-19"><a href="#cb22-19"></a>myIons &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Chloride (mg/L)"</span>, <span class="st">"Bromide (mg/L)"</span>, <span class="st">"Nitrate-N (mg/L)"</span>, <span class="st">"Sulfate (mg/L)"</span>, <span class="st">"Sodium (mg/L)"</span>,</span>
<span id="cb22-20"><a href="#cb22-20"></a>     <span class="st">"Potassium (mg/L)"</span>, <span class="st">"Magnesium (mg/L)"</span>,  <span class="st">"Calcium (mg/L)"</span> )</span>
<span id="cb22-21"><a href="#cb22-21"></a>myIons.Contrib &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"PctContrib."</span>,myIons)</span>
<span id="cb22-22"><a href="#cb22-22"></a>mySite &lt;-<span class="st"> "BELK-101-X"</span></span>
<span id="cb22-23"><a href="#cb22-23"></a>data.plot &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(contrib.ion, contrib.ion[,<span class="st">"Site"</span>]<span class="op">==</span>mySite, <span class="dt">select=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Site"</span>,<span class="st">"Cond.Total"</span>,myIons.Contrib,myIons))</span>
<span id="cb22-24"><a href="#cb22-24"></a><span class="co">## Plot, one site (with cond value)</span></span>
<span id="cb22-25"><a href="#cb22-25"></a><span class="kw"><a href="https://rdrr.io/r/graphics/dotchart.html">dotchart</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span>(data.plot[,myIons.Contrib])), <span class="dt">labels=</span>myIons, <span class="dt">main=</span>mySite, <span class="dt">xlab=</span><span class="st">"Percent Contribution"</span>, <span class="dt">pch=</span><span class="dv">19</span>, <span class="dt">pt.cex=</span><span class="fl">1.2</span>)</span>
<span id="cb22-26"><a href="#cb22-26"></a><span class="kw"><a href="https://rdrr.io/r/graphics/mtext.html">mtext</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"Conductivity (uS/cm) = "</span>,<span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(data.plot[,<span class="st">"Cond.Total"</span>],<span class="dv">1</span>)))</span>
<span id="cb22-27"><a href="#cb22-27"></a><span class="co">## Plot all sites using panel.dotplot() in the lattice package</span></span>
<span id="cb22-28"><a href="#cb22-28"></a><span class="co">#</span></span>
<span id="cb22-29"><a href="#cb22-29"></a><span class="co">## Plot as a horizontal bar plot</span></span>
<span id="cb22-30"><a href="#cb22-30"></a><span class="co"># need to change margins to fit labels</span></span>
<span id="cb22-31"><a href="#cb22-31"></a><span class="co">#par(mai=c(1,2,1,1))</span></span>
<span id="cb22-32"><a href="#cb22-32"></a><span class="kw"><a href="https://rdrr.io/r/graphics/barplot.html">barplot</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span>(data.plot[,myIons.Contrib])), <span class="dt">names.arg=</span>myIons, <span class="dt">main=</span>mySite, <span class="dt">xlab=</span><span class="st">"Percent Contribution"</span></span>
<span id="cb22-33"><a href="#cb22-33"></a>       , <span class="dt">axes=</span><span class="ot">TRUE</span>, <span class="dt">horiz=</span><span class="ot">TRUE</span>, <span class="dt">las=</span><span class="dv">1</span>)</span>
<span id="cb22-34"><a href="#cb22-34"></a><span class="kw"><a href="https://rdrr.io/r/graphics/mtext.html">mtext</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"Conductivity (uS/cm) = "</span>,<span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(data.plot[,<span class="st">"Cond.Total"</span>],<span class="dv">1</span>)))</span></code></pre></div>
<p><img src="MBSStools_vignette_files/figure-html/Ion%20Results%20and%20Charts-1.png" width="700"><img src="MBSStools_vignette_files/figure-html/Ion%20Results%20and%20Charts-2.png" width="700"></p>
</div>
<div id="phi" class="section level2">
<h2 class="hasAnchor">
<a href="#phi" class="anchor"></a>PHI</h2>
<p>The PHIcalc() function calculates the MBSS Physical Habitat Index (PHI), Paul et al. 2003. The report is included in the /extdata folder of the library.</p>
<p>There are two versions of the calculation based on pre- and post-2000. The function determines the correct calculation based on the data provided.</p>
<p>The input is a data frame with column names matching the variables collected in the field along with SampleID, bioregion, and area (acres).</p>
<p>The function PHIcalc() requires the no additional packages.</p>
<table class="table">
<thead><tr class="header">
<th align="left">StationID</th>
<th align="left">SampleID</th>
<th align="right">CollDate</th>
<th align="left">BioRegion</th>
<th align="left">PHICalcYear</th>
<th align="right">Area_acres</th>
<th align="left">Remote_020</th>
<th align="right">Shading_0100</th>
<th align="left">EpiSub_020</th>
<th align="right">BankStab_020</th>
<th align="right">AvgRipWid_m50max</th>
<th align="right">InStrmHab_020</th>
<th align="right">InstrmWood_Num</th>
<th align="right">RiffQual_020</th>
<th align="right">Embedd_0100</th>
<th align="right">Erosn_ExtR_075</th>
<th align="right">Erosn_ExtL_075</th>
<th align="right">Erosn_SevR_03</th>
<th align="right">Erosn_SevL_03</th>
<th align="right">RoadDist_m</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AL-A-007-304-96</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Highlands</td>
<td align="left">1994.000000</td>
<td align="right">8009.00</td>
<td align="left">2.000000</td>
<td align="right">80</td>
<td align="left">7.000000</td>
<td align="right">12</td>
<td align="right">50</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AL-A-020-228-95</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Highlands</td>
<td align="left">1994.000000</td>
<td align="right">1335.26</td>
<td align="left">17.000000</td>
<td align="right">90</td>
<td align="left">1.000000</td>
<td align="right">5</td>
<td align="right">50</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">AL-A-027-205-95</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Highlands</td>
<td align="left">1994.000000</td>
<td align="right">2185.65</td>
<td align="left">20.000000</td>
<td align="right">93</td>
<td align="left">11.000000</td>
<td align="right">16</td>
<td align="right">50</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AL-A-027-209-95</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Highlands</td>
<td align="left">1994.000000</td>
<td align="right">2428.11</td>
<td align="left">19.000000</td>
<td align="right">97</td>
<td align="left">11.000000</td>
<td align="right">15</td>
<td align="right">50</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">AL-A-033-314-95</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Highlands</td>
<td align="left">1994.000000</td>
<td align="right">9142.73</td>
<td align="left">6.000000</td>
<td align="right">60</td>
<td align="left">17.000000</td>
<td align="right">6</td>
<td align="right">50</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AL-A-054-320-96</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Highlands</td>
<td align="left">1994.000000</td>
<td align="right">38907.00</td>
<td align="left">1.000000</td>
<td align="right">60</td>
<td align="left">5.000000</td>
<td align="right">16</td>
<td align="right">0</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>The function returns a dataframe of reslts that need to be saved (e.g., write.table()). The result table from the example data is shown below.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(MBSStools)</span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="co"># data</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>myData &lt;-<span class="st"> </span>MBSS.PHI</span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="co"># calculate PHI</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>PHI &lt;-<span class="st"> </span><span class="kw"><a href="../reference/PHIcalc.html">PHIcalc</a></span>(myData)</span>
<span id="cb23-6"><a href="#cb23-6"></a>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(PHI))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">StationID</th>
<th align="left">SampleID</th>
<th align="right">CollDate</th>
<th align="left">BioRegion</th>
<th align="left">PHICalcYear</th>
<th align="right">Area_acres</th>
<th align="right">Remote_020</th>
<th align="right">Shading_0100</th>
<th align="right">EpiSub_020</th>
<th align="right">BankStab_020</th>
<th align="right">AvgRipWid_m50max</th>
<th align="right">InStrmHab_020</th>
<th align="right">InstrmWood_Num</th>
<th align="right">RiffQual_020</th>
<th align="right">Embedd_0100</th>
<th align="right">Erosn_ExtR_075</th>
<th align="right">Erosn_ExtL_075</th>
<th align="right">Erosn_SevR_03</th>
<th align="right">Erosn_SevL_03</th>
<th align="right">RoadDist_m</th>
<th align="right">Erosn_SevR_02</th>
<th align="right">Erosn_SevL_02</th>
<th align="right">BANKSTAB1994</th>
<th align="right">BANKSTAB2000</th>
<th align="right">REMOTE1994</th>
<th align="right">REMOTE2000</th>
<th align="right">REMOTE</th>
<th align="right">SHADING</th>
<th align="right">EPI</th>
<th align="right">BANKSTAB</th>
<th align="right">RIPWID</th>
<th align="right">INSTRHAB</th>
<th align="right">WOOD</th>
<th align="right">RIFFQUAL</th>
<th align="right">EMBEDD</th>
<th align="right">PHI.denom</th>
<th align="right">PHI.sum</th>
<th align="right">PHI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AL-A-007-304-96</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Highlands</td>
<td align="left">1994.000000</td>
<td align="right">8009.00</td>
<td align="right">2</td>
<td align="right">80</td>
<td align="right">7</td>
<td align="right">12</td>
<td align="right">50</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.7097067</td>
<td align="right">NA</td>
<td align="right">0.10</td>
<td align="right">NA</td>
<td align="right">10</td>
<td align="right">75.24754</td>
<td align="right">38.888889</td>
<td align="right">70.97067</td>
<td align="right">100</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">5</td>
<td align="right">295.1071</td>
<td align="right">59.02142</td>
</tr>
<tr class="even">
<td align="left">AL-A-020-228-95</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Highlands</td>
<td align="left">1994.000000</td>
<td align="right">1335.26</td>
<td align="right">17</td>
<td align="right">90</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">50</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.3560104</td>
<td align="right">NA</td>
<td align="right">0.85</td>
<td align="right">NA</td>
<td align="right">85</td>
<td align="right">87.36514</td>
<td align="right">5.555556</td>
<td align="right">35.60104</td>
<td align="right">100</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">5</td>
<td align="right">313.5217</td>
<td align="right">62.70435</td>
</tr>
<tr class="odd">
<td align="left">AL-A-027-205-95</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Highlands</td>
<td align="left">1994.000000</td>
<td align="right">2185.65</td>
<td align="right">20</td>
<td align="right">93</td>
<td align="right">11</td>
<td align="right">16</td>
<td align="right">50</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.8640553</td>
<td align="right">NA</td>
<td align="right">1.00</td>
<td align="right">NA</td>
<td align="right">100</td>
<td align="right">91.97549</td>
<td align="right">61.111111</td>
<td align="right">86.40553</td>
<td align="right">100</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">5</td>
<td align="right">439.4921</td>
<td align="right">87.89843</td>
</tr>
<tr class="even">
<td align="left">AL-A-027-209-95</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Highlands</td>
<td align="left">1994.000000</td>
<td align="right">2428.11</td>
<td align="right">19</td>
<td align="right">97</td>
<td align="right">11</td>
<td align="right">15</td>
<td align="right">50</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.8274722</td>
<td align="right">NA</td>
<td align="right">0.95</td>
<td align="right">NA</td>
<td align="right">95</td>
<td align="right">99.97552</td>
<td align="right">61.111111</td>
<td align="right">82.74722</td>
<td align="right">100</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">5</td>
<td align="right">438.8338</td>
<td align="right">87.76677</td>
</tr>
<tr class="odd">
<td align="left">AL-A-033-314-95</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Highlands</td>
<td align="left">1994.000000</td>
<td align="right">9142.73</td>
<td align="right">6</td>
<td align="right">60</td>
<td align="right">17</td>
<td align="right">6</td>
<td align="right">50</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.4174798</td>
<td align="right">NA</td>
<td align="right">0.30</td>
<td align="right">NA</td>
<td align="right">30</td>
<td align="right">56.36867</td>
<td align="right">94.444444</td>
<td align="right">41.74798</td>
<td align="right">100</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">5</td>
<td align="right">322.5611</td>
<td align="right">64.51222</td>
</tr>
<tr class="even">
<td align="left">AL-A-054-320-96</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Highlands</td>
<td align="left">1994.000000</td>
<td align="right">38907.00</td>
<td align="right">1</td>
<td align="right">60</td>
<td align="right">5</td>
<td align="right">16</td>
<td align="right">0</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.8640553</td>
<td align="right">NA</td>
<td align="right">0.05</td>
<td align="right">NA</td>
<td align="right">5</td>
<td align="right">56.36867</td>
<td align="right">27.777778</td>
<td align="right">86.40553</td>
<td align="right">0</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">5</td>
<td align="right">175.5520</td>
<td align="right">35.11040</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="shiny" class="section level1">
<h1 class="hasAnchor">
<a href="#shiny" class="anchor"></a>Shiny</h1>
<p>Included in the package is an example Shiny package to calculates the three IBI’s for MBSS.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(MBSStools)</span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="kw"><a href="../reference/runShiny.html">runShiny</a></span>()</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#installation">Installation</a></li>
      <li><a href="#packages">Packages</a></li>
      <li>
<a href="#contents">Contents</a><ul class="nav nav-pills nav-stacked">
<li><a href="#ibi">IBI</a></li>
      <li><a href="#fish-distribution-maps">Fish Distribution Maps</a></li>
      <li><a href="#map-creation">Map Creation</a></li>
      <li><a href="#stream-discharge">Stream Discharge</a></li>
      <li><a href="#ion-matrix">Ion Matrix</a></li>
      <li><a href="#phi">PHI</a></li>
      </ul>
</li>
      <li><a href="#shiny">Shiny</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Erik W. Leppo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
